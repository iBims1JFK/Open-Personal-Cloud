services:
  test-node:
    build:
      context: .
      dockerfile: Dockerfile.node
    container_name: opc_test_node
    privileged: true
    volumes:
      - /sys/fs/cgroup:/sys/fs/cgroup:rw
      - /lib/modules:/lib/modules:ro # Access to kernel modules for loop devices
      - /dev:/dev:rw # Access to devices
      - docker_data:/var/lib/docker
      - containerd_data:/var/lib/containerd
    cgroup: host
    tmpfs:
      - /run
      - /run/lock
    network_mode: bridge
    tty: true

volumes:
  docker_data:
  containerd_data:
